# Инструменты системного администратора

Эта директория содержит инструменты для развертывания и управления компонентами проекта.

## Автоматическая установка

Для автоматической установки и настройки серверной части Telegram-бота и Grafana был создан специальный скрипт `install.sh`.

### Как использовать скрипт

1.  **Перейдите в директорию со скриптом:**
    ```bash
    cd sysadmin-tools
    ```

2.  **Сделайте скрипт исполняемым (если еще не сделано):**
    ```bash
    chmod +x install.sh
    ```

3.  **Запустите скрипт:**
    ```bash
    ./install.sh
    ```

### Что делает скрипт

-   **Проверяет наличие зависимостей:** Убеждается, что на вашем сервере установлены Docker и Docker Compose.
-   **Запрашивает конфигурационные данные:** Скрипт попросит вас ввести API-токен для Telegram-бота, а также хосты и порты для FPTN-сервера и Grafana.
-   **Настраивает Telegram-бота:**
    -   Создает `.env` файл с вашими настройками.
    -   Копирует `servers.json.demo` и `servers_censored_zone.json.demo` в `servers.json` и `servers_censored_zone.json`. **Вам нужно будет вручную отредактировать эти файлы, чтобы добавить ваши серверы.**
    -   Собирает и запускает Docker-контейнер с ботом.
-   **Настраивает Grafana:**
    -   Создает `.env` файл с вашими настройками.
    -   Генерирует случайный `PROMETHEUS_SECRET_ACCESS_KEY` и сохраняет его в `.env`. **Убедитесь, что этот ключ совпадает с ключом в конфигурации вашего fptn-server.**
    -   Запускает Docker-контейнеры с Grafana и Prometheus.

### После установки

-   **Telegram-бот** будет запущен в фоновом режиме.
-   **Grafana** будет доступна по адресу `http://<ваш_ip_для_grafana>:3000`.
    -   Логин и пароль по умолчанию: `admin` / `admin`.
    -   **Обязательно смените пароль после первого входа!**

### Остановка сервисов

Чтобы остановить запущенные сервисы, используйте команду `docker-compose down` в соответствующих директориях:

-   Для Telegram-бота: `sysadmin-tools/telegram-bot`
-   Для Grafana: `sysadmin-tools/grafana`
